#!/bin/shell

if ! cmd_exists fzf; then
  :
else
  : "set recent repository" && {
    if cmd_exists ghq; then
      function fzf-recent-repos() {
        selected_repo=$(ghq list --full-path | fzf --prompt "[find repository]>" --height 30)
        if [ -n "$selected_repo" ]; then
          BUFFER="cd ${selected_repo}"
          zle accept-line
        fi
      }
      zle -N fzf-recent-repos
      bindkey "^g^r" fzf-recent-repos
    fi
  }
fi
